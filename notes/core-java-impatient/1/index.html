<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="第一章 基本的编程结构 # 基本类型和变量 # 数字 # 4 字节整型 int 约正负 21 亿，8字节整型 long 约正负 9×10^19，约 900 千亿。4 字节浮点数 float 约 6 位有效数字，范围至正负 10^38 ；8 字节浮点数 double 约 15 位有效数字，范围至正负 10^308。
Integer Byte Short Long Double Float 均有 MAX_VALUE 和 MIN_VALUE 成员变量，指示其边界范围。Float 和 Double 还有 NaN、POSITIVE_INFINITY 和 NEGATIVE_INFINITY 三个静态变量。NaN 之间互不相等。
Java 还提供了 BigInteger 和 BigDemical 两个类，尤其适用于金融。
在部分机器上，如 Intel x86平台，使用 80 bit 的浮点单元来提高浮点运算的精度。如果需要严格的 64 bit 浮点运算，可以在方法前加上 strictfp 修饰符。另外几个不常见的关键字是与多线程有关的 volatile，与序列化有关的 transient 和与跨语言调用有关的 native。此外，StrictMath 类也提供了类似的功能。"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:url" content="/notes/core-java-impatient/1/"><meta property="og:site_name" content="czdm75 Blog"><meta property="og:title" content="1. Basic OOP"><meta property="og:description" content="第一章 基本的编程结构 # 基本类型和变量 # 数字 # 4 字节整型 int 约正负 21 亿，8字节整型 long 约正负 9×10^19，约 900 千亿。4 字节浮点数 float 约 6 位有效数字，范围至正负 10^38 ；8 字节浮点数 double 约 15 位有效数字，范围至正负 10^308。
Integer Byte Short Long Double Float 均有 MAX_VALUE 和 MIN_VALUE 成员变量，指示其边界范围。Float 和 Double 还有 NaN、POSITIVE_INFINITY 和 NEGATIVE_INFINITY 三个静态变量。NaN 之间互不相等。
Java 还提供了 BigInteger 和 BigDemical 两个类，尤其适用于金融。
在部分机器上，如 Intel x86平台，使用 80 bit 的浮点单元来提高浮点运算的精度。如果需要严格的 64 bit 浮点运算，可以在方法前加上 strictfp 修饰符。另外几个不常见的关键字是与多线程有关的 volatile，与序列化有关的 transient 和与跨语言调用有关的 native。此外，StrictMath 类也提供了类似的功能。"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="notes"><title>1. Basic OOP | czdm75 Blog</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.97cfda4f5e3c9fa49a2bf8d401f4ddc0eec576c99cdcf6afbec19173200c37db.css><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.f7e98004e6b8d1bafd93b9d4b053644c96b18c50c1205ec6db396c209e97a5a3.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>czdm75 Blog</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-7258d8e1fea5a0c302a6de537a7b6f57 class=toggle>
<label for=section-7258d8e1fea5a0c302a6de537a7b6f57 class="flex justify-between"><a href=/cs/>Computer Science</a></label><ul><li><a href=/cs/linux-io-multiplex/>Linux IO Multiplexing</a></li></ul></li><li><input type=checkbox id=section-6c3d93bc59df31a703231f35ad75d678 class=toggle>
<label for=section-6c3d93bc59df31a703231f35ad75d678 class="flex justify-between"><a href=/distributed/>Distributed Systems</a></label><ul><li><a href=/distributed/hadoop-basic/>Hadoop Basic Concepts</a></li><li><a href=/distributed/spark-rdd/>Spark RDD Programming</a></li><li><a href=/distributed/spark-sql/>Spark SQL Programming</a></li></ul></li><li><a href=/notes/>Notes on Books</a><ul><li><input type=checkbox id=section-75aaf2c83c6ed8e1f079c5418c19dad4 class=toggle checked>
<label for=section-75aaf2c83c6ed8e1f079c5418c19dad4 class="flex justify-between"><a href=/notes/core-java-impatient/>Core Java for Impatients</a></label><ul><li><a href=/notes/core-java-impatient/1/ class=active>1. Basic OOP</a></li><li><a href=/notes/core-java-impatient/2/>2. Interface, Lambda</a></li><li><a href=/notes/core-java-impatient/3/>3. Inheritance, Reflection</a></li><li><a href=/notes/core-java-impatient/4/>4. Exception, Logging</a></li><li><a href=/notes/core-java-impatient/5/>5. Generics</a></li><li><a href=/notes/core-java-impatient/6/>6. Collections, Streams</a></li><li><a href=/notes/core-java-impatient/7/>7. IO, Regexp, Serialization</a></li><li><a href=/notes/core-java-impatient/8/>8. Threading</a></li><li><a href=/notes/core-java-impatient/9/>9. Notations</a></li></ul></li><li><input type=checkbox id=section-b2f01d2b22c35e214487b845322f7a58 class=toggle>
<label for=section-b2f01d2b22c35e214487b845322f7a58 class="flex justify-between"><a href=/notes/ddia/>Designing Data-Intensive Applications</a></label><ul><li><a href=/notes/ddia/1/>1. Data System and Data Model</a></li><li><a href=/notes/ddia/2/>2. Storage, Query, Encoding</a></li><li><a href=/notes/ddia/3/>3. Replication and Partition</a></li></ul></li><li><input type=checkbox id=section-8c64db930c5b756022bf5d3ba1af6015 class=toggle>
<label for=section-8c64db930c5b756022bf5d3ba1af6015 class="flex justify-between"><a href=/notes/in-depth-jvm/>In-depth Understanding JVM</a></label><ul><li><a href=/notes/in-depth-jvm/gc/>Garbage Collection</a></li><li><a href=/notes/in-depth-jvm/synchronization/>Java Synchronization</a></li><li><a href=/notes/in-depth-jvm/memory-model/>JVM Memory Model</a></li><li><a href=/notes/in-depth-jvm/memory-region/>JVM Memory Regions</a></li><li><a href=/notes/in-depth-jvm/threadlocal-reference/>ThreadLocal and Reference</a></li></ul></li><li><input type=checkbox id=section-15259ec15aa2cb7859c77500905f6b03 class=toggle>
<label for=section-15259ec15aa2cb7859c77500905f6b03 class="flex justify-between"><a href=/notes/intro-algo/>Introduction to Algorithms</a></label><ul><li><a href=/notes/intro-algo/1/>1. Compexity, Divide</a></li><li><a href=/notes/intro-algo/2/>2. Sorting, Order Statistic</a></li><li><a href=/notes/intro-algo/3/>3. LinkedList, HashTable</a></li><li><a href=/notes/intro-algo/4/>4. BST, Balanced BSTs</a></li><li><a href=/notes/intro-algo/5/>5. Trie-Tree, Extending Data Structures</a></li><li><a href=/notes/intro-algo/6/>6. Dynamic Programming, Greedy, Amortize</a></li><li><a href=/notes/intro-algo/7/>7. B-Tree, Fibonacci Heap, vEB Tree</a></li><li><a href=/notes/intro-algo/8/>8. Graphs</a></li></ul></li><li><input type=checkbox id=section-3efdc8e38ef7f47959bf45f30a9dec98 class=toggle>
<label for=section-3efdc8e38ef7f47959bf45f30a9dec98 class="flex justify-between"><a href=/notes/programming-scala/>Programming in Scala</a></label><ul><li><a href=/notes/programming-scala/1/>1. Basics</a></li><li><a href=/notes/programming-scala/2/>2. Functions</a></li><li><a href=/notes/programming-scala/3/>3 .Inheritance, Package, Assertion</a></li><li><a href=/notes/programming-scala/4/>4. Pattern Matching, Collections</a></li><li><a href=/notes/programming-scala/5/>5. Generics, Abstract, Implicits</a></li><li><a href=/notes/programming-scala/6/>6. Collections, Extractor, etc</a></li></ul></li></ul></li><li><input type=checkbox id=section-ebdb83a62411872593631ee1e4ab41d9 class=toggle>
<label for=section-ebdb83a62411872593631ee1e4ab41d9 class="flex justify-between"><a href=/pl/>Programming Languages</a></label><ul><li><a href=/pl/java-nio-2/>Java NIO Internal</a></li><li><a href=/pl/java-nio-1/>Java NIO Usage</a></li><li><a href=/pl/lambda/>Lambda Calculus and Y Combinator</a></li><li><a href=/pl/curry/>Scala: Currying, Partially Applied, Partial</a></li><li><a href=/pl/monad/>Scala: Monad, from Scala Perspective</a></li></ul></li></ul><ul><li><a href=https://github.com/czdm75 target=_blank rel=noopener>GitHub</a></li><li><a href=https://themes.gohugo.io/hugo-book/ target=_blank rel=noopener>Theme</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>1. Basic OOP</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#第一章-基本的编程结构>第一章 基本的编程结构</a><ul><li><a href=#基本类型和变量>基本类型和变量</a><ul><li><a href=#数字>数字</a></li><li><a href=#字符>字符</a></li></ul></li><li><a href=#操作符>操作符</a></li><li><a href=#字符串>字符串</a><ul><li><a href=#unicode-编码问题>Unicode 编码问题</a></li></ul></li><li><a href=#控制台-io>控制台 IO</a></li><li><a href=#控制流和数组>控制流和数组</a></li><li><a href=#可变参数>可变参数</a></li></ul></li><li><a href=#第二章-面向对象编程>第二章 面向对象编程</a><ul><li><a href=#包>包</a><ul><li><a href=#class-path>Class Path</a></li><li><a href=#包密封>包密封</a></li><li><a href=#javadoc>JavaDoc</a><ul><li><a href=#类注释>类注释</a></li><li><a href=#方法注释>方法注释</a></li><li><a href=#变量注释>变量注释</a></li><li><a href=#通用标记>通用标记</a></li><li><a href=#链接>链接</a></li><li><a href=#包和概述注释>包和概述注释</a></li></ul></li><li><a href=#静态导入>静态导入</a></li></ul></li><li><a href=#嵌套类>嵌套类</a><ul><li><a href=#静态嵌套类>静态嵌套类</a><ul><li><a href=#私有静态嵌套类>私有静态嵌套类</a></li><li><a href=#公有静态嵌套类>公有静态嵌套类</a></li></ul></li><li><a href=#内部类>内部类</a></li><li><a href=#内部类的特殊情况>内部类的特殊情况</a></li><li><a href=#局部类>局部类</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=第一章-基本的编程结构>第一章 基本的编程结构
<a class=anchor href=#%e7%ac%ac%e4%b8%80%e7%ab%a0-%e5%9f%ba%e6%9c%ac%e7%9a%84%e7%bc%96%e7%a8%8b%e7%bb%93%e6%9e%84>#</a></h1><h2 id=基本类型和变量>基本类型和变量
<a class=anchor href=#%e5%9f%ba%e6%9c%ac%e7%b1%bb%e5%9e%8b%e5%92%8c%e5%8f%98%e9%87%8f>#</a></h2><h3 id=数字>数字
<a class=anchor href=#%e6%95%b0%e5%ad%97>#</a></h3><p>4 字节整型 <code>int</code> 约正负 21 亿，8字节整型 <code>long</code> 约正负 9×10^19，约 900 千亿。4 字节浮点数 <code>float</code> 约 6 位有效数字，范围至正负 10^38 ；8 字节浮点数 <code>double</code> 约 15 位有效数字，范围至正负 10^308。</p><p><code>Integer</code> <code>Byte</code> <code>Short</code> <code>Long</code> <code>Double</code> <code>Float</code> 均有 <code>MAX_VALUE</code> 和 <code>MIN_VALUE</code> 成员变量，指示其边界范围。<code>Float</code> 和 <code>Double</code> 还有 <code>NaN</code>、<code>POSITIVE_INFINITY</code> 和 <code>NEGATIVE_INFINITY</code> 三个静态变量。<code>NaN</code> 之间互不相等。</p><p>Java 还提供了 <code>BigInteger</code> 和 <code>BigDemical</code> 两个类，尤其适用于金融。</p><p>在部分机器上，如 Intel x86平台，使用 80 bit 的浮点单元来提高浮点运算的精度。如果需要严格的 64 bit 浮点运算，可以在方法前加上 <code>strictfp</code> 修饰符。另外几个不常见的关键字是与多线程有关的 <code>volatile</code>，与序列化有关的 <code>transient</code> 和与跨语言调用有关的 <code>native</code>。此外，<code>StrictMath</code> 类也提供了类似的功能。</p><h3 id=字符>字符
<a class=anchor href=#%e5%ad%97%e7%ac%a6>#</a></h3><p><code>char</code> 描述的是 Unicode 中的<strong>编码单元</strong>，即一个 16 bit 整数。可以直接使用 Unicode 编码如 <code>\u004A</code>，甚至直接用数字 <code>0x004A</code> 来声明 <code>char</code>。</p><p>此外，还有转义符：<code>\n</code> <code>\r</code> <code>\t</code> <code>\b</code> <code>\\</code> 以及单引号。</p><h2 id=操作符>操作符
<a class=anchor href=#%e6%93%8d%e4%bd%9c%e7%ac%a6>#</a></h2><table><thead><tr><th>运算符</th><th>操作</th><th>运算符</th><th>操作</th><th>运算符</th><th>操作</th></tr></thead><tbody><tr><td><code>~</code></td><td>按位取反</td><td><code>(cast)</code></td><td>强制转换</td><td><code>new</code></td><td>构造对象</td></tr><tr><td><code>&lt;&lt;</code></td><td>左移，补0</td><td><code>>></code></td><td>逻辑右移</td><td><code>>>></code></td><td>算数右移</td></tr><tr><td><code>instanceof</code></td><td>判断实例</td><td><code>&</code></td><td>按位与</td><td><code>^</code></td><td>按位异或</td></tr><tr><td>`</td><td>`</td><td>按位或</td><td><code>? :</code></td><td>条件语句</td><td><code>&&</code></td></tr></tbody></table><ul><li>求模操作符 <code>%</code> 对于负数是不安全的，如 <code>-7%5</code>结果为 -2。最好使用 <code>Math.floorMod(-7,5)</code> 得到 3。</li><li>如果整数运算中需要在溢出等特殊情况时抛出异常，需要使用 <code>Math.xxxExact()</code> 系列的方法。</li><li>在算术操作时，基本数字类型之间会发生<strong>转型</strong>。转型的 方向为：<code>int->long->float->double</code>。注意，这意味着 <code>short</code> 和 <code>byte</code> 在运算时也被作为 <code>int</code> 处理，并需要重新强制转换回来。</li><li>四舍五入使用 <code>Math.round</code> 方法，返回 <code>long</code> 型。如果在 cast 中担心丢失数字，可以使用 <code>Math.toIntExact()</code> 方法，溢出时会报异常。</li><li>Java 的逻辑操作是短路的。但是，为了代码的可读性，不建议在判断语句中使用带有副作用的语句。</li><li><code>>></code> 在高位补 0，<code>>>></code> 在高位补符号位。另外，<code>1&lt;&lt;35 == 1&lt;&lt;3</code>。如果是 <code>long</code> 类型，则模 64。</li></ul><h2 id=字符串>字符串
<a class=anchor href=#%e5%ad%97%e7%ac%a6%e4%b8%b2>#</a></h2><p>连接与加号混合可能出现问题。如，<code>""+42+1</code> 可能得到 <code>421</code>。使用圆括号来避免。连接的实现实际上是 <code>StringBuilder</code> 类。</p><p><code>String.equalsIgnoreCase</code> 方法忽略大小写。<code>String.compareTo</code> 方法使用 UTF-16 顺序，结果可能和直觉不一样。要使用自然语言顺序，使用 <code>Collator</code> 对象。这是一个单例的 <code>Comparator</code> 对象，其排序与 Locale 和其他设置有关。</p><p><code>Integer.parseInt(String)</code> 返回一个 <code>int</code>，<code>Integer.valueOf(String)</code> 返回一个 <code>Integer</code>。<code>parseInt(String, int)</code> 指定数字字符串的进制。<code>Double</code> 的情况类似。</p><p>Java 的 <code>String</code> 是 Immutable 的。</p><h3 id=unicode-编码问题>Unicode 编码问题
<a class=anchor href=#unicode-%e7%bc%96%e7%a0%81%e9%97%ae%e9%a2%98>#</a></h3><p>Java 基于 UTF-16，但 Unicode 的范围已经超过了 16 bit。于是，超出的字符使用连续两个 16 bit 的整数，即两个编码单元（Code Unit），组成一个编码点（Code Point）。这个过程与反斜杠转义类似。如果不使用高位区的字符，则可以直接用 <code>String.charAt(int)</code> 方法。这样得到的返回值是 <code>char</code>，即 16 bit 整数。如果这个字符是高位的，就会面临得到半个字符的情况。这时应该使用 <code>String.codePointAt</code> 以得到两个编码单元，其返回值是一个 <code>int</code>，即 32 bit 整数。如果字符是低位的，那么返回值的一半是全 0。否则，返回值内就是两个编码单元。还可以使用：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#b00040>int</span><span style=color:#666>[]</span><span style=color:#bbb> </span>codepoints<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#34;abc&#34;</span>.<span style=color:#7d9029>codePoints</span>().<span style=color:#7d9029>toArray</span>()<span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=控制台-io>控制台 IO
<a class=anchor href=#%e6%8e%a7%e5%88%b6%e5%8f%b0-io>#</a></h2><p><code>Scanner</code> 类的 <code>nextLine()</code> 方法读取一行，<code>next()</code> 方法读取以空格为分割的单词。</p><p>读取密码时，使用：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Console<span style=color:#bbb> </span>terminal<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>System.<span style=color:#7d9029>console</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#b00040>char</span><span style=color:#666>[]</span><span style=color:#bbb> </span>password<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>terminal.<span style=color:#7d9029>readPassword</span>(<span style=color:#ba2121>&#34;hint info&#34;</span>);<span style=color:#bbb>
</span></span></span></code></pre></div><p>由于 <code>String</code> 是 Immutable 的，在 GC 之前，它都会留在内存里，不够安全。相比之下，<code>char[]</code> 可以在使用之后就覆盖掉。</p><p><code>System.out.printf()</code> 和 <code>String.format()</code> 接受类似的参数，进行格式化。</p><h2 id=控制流和数组>控制流和数组
<a class=anchor href=#%e6%8e%a7%e5%88%b6%e6%b5%81%e5%92%8c%e6%95%b0%e7%bb%84>#</a></h2><p><code>switch</code> 语句可以接受的标签包括：<code>char</code> <code>byte</code> <code>short</code> <code>int</code> 及其包装类，<code>String</code> 和枚举类型。需要注意的是，由于 fall through 特性，<code>switch</code> 的各个分支之间的声明变量是共用的。</p><p><code>break</code> 和 <code>continue</code> 语句可以使用标签，以方便跳出循环：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a0a000>outer</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>while</span>(){<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>while</span>(){<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>break</span><span style=color:#bbb> </span>outer;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>对于基本类型的数组，默认使用 0 和 <code>false</code> 来填充。对于对象数组，默认使用 <code>null</code> 来填充。</p><p>数组和 <code>ArrayList</code> 之间 常常互相转换和进行深拷贝：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String<span style=color:#666>[]</span><span style=color:#bbb> </span>arr<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>list.<span style=color:#7d9029>toArray</span>(<span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>String<span style=color:#666>[]</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>ArrayList<span style=color:#666>&lt;</span>String<span style=color:#666>&gt;</span><span style=color:#bbb> </span>list<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>ArrayList<span style=color:#666>&lt;&gt;</span>(Arrays.<span style=color:#7d9029>asList</span>(arr));<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>ArrayList<span style=color:#666>&lt;</span>String<span style=color:#666>&gt;</span><span style=color:#bbb> </span>newList<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>ArrayList<span style=color:#666>&lt;&gt;</span>(list);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>String<span style=color:#666>[]</span><span style=color:#bbb> </span>newArr<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Arrays.<span style=color:#7d9029>copyOf</span>(arr);<span style=color:#bbb>
</span></span></span></code></pre></div><p><code>Arrays</code> 和 <code>Collections</code> 类提供了数组的常见算法。</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Arrays.<span style=color:#7d9029>fill</span>(arr,<span style=color:#bbb> </span>value);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Arrays.<span style=color:#7d9029>sort</span>(arr);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// 扩展一个数组</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>arr<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Arrays.<span style=color:#7d9029>copyOf</span>(arr,<span style=color:#bbb> </span>arr.<span style=color:#7d9029>length</span><span style=color:#bbb> </span><span style=color:#666>*</span><span style=color:#bbb> </span>2);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// 多线程的排序，Collections 里没有这个方法</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Array.<span style=color:#7d9029>parallelSort</span>(arr);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// Arrays 里没有这两个方法</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Collections.<span style=color:#7d9029>shuffle</span>(list);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Collections.<span style=color:#7d9029>reverse</span>(list);<span style=color:#bbb>
</span></span></span></code></pre></div><p>在使用 <code>toString</code> 时，数组和 <code>ArrayList</code> 都能够打印出元素内容。但对于多维数组，则要使用 <code>deepToString</code>。</p><h2 id=可变参数>可变参数
<a class=anchor href=#%e5%8f%af%e5%8f%98%e5%8f%82%e6%95%b0>#</a></h2><p>可变参数只能是最后一个参数。</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#b00040>void</span><span style=color:#bbb> </span><span style=color:#00f>method</span>(<span style=color:#b00040>double</span>...<span style=color:#bbb> </span>nums)<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#408080;font-style:italic>//nums is a double[]</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>//call this method</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>method(1.<span style=color:#7d9029>0</span>,<span style=color:#bbb> </span>2.<span style=color:#7d9029>0</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#b00040>double</span><span style=color:#666>[]</span><span style=color:#bbb> </span>nums<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>{1.<span style=color:#7d9029>0</span>,<span style=color:#bbb> </span>2.<span style=color:#7d9029>0</span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>method(nums)<span style=color:#bbb>
</span></span></span></code></pre></div><h1 id=第二章-面向对象编程>第二章 面向对象编程
<a class=anchor href=#%e7%ac%ac%e4%ba%8c%e7%ab%a0-%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e7%bc%96%e7%a8%8b>#</a></h1><h2 id=包>包
<a class=anchor href=#%e5%8c%85>#</a></h2><p>当使用 <code>javac</code> 程序时，class 文件将会被放在与源代码相同的位置。但在运行类文件时，必须将其放置在对应包的文件夹里。</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#408080;font-style:italic># 指定class文件的位置</span>
</span></span><span style=display:flex><span>javac -d &lt;path&gt;
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># jar程序的参数与tar程序类似</span>
</span></span><span style=display:flex><span>jar cvf xxx.jar com/*.class
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 指定jar文件的主类</span>
</span></span><span style=display:flex><span>jar cvfe xxx.jar com.MainClass com/*.class
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 运行jar文件</span>
</span></span><span style=display:flex><span>java -jar xxx.jar
</span></span></code></pre></div><h3 id=class-path>Class Path
<a class=anchor href=#class-path>#</a></h3><p>class path 可以包含：</p><ul><li>匹配包名的包含 class 文件的子目录</li><li>jar 文件</li><li>包含 jar 文件的子目录</li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>java -cp .:../libs/lib1.jar com.MainClass.class
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 或者：</span>
</span></span><span style=display:flex><span><span style=color:green>export</span> <span style=color:#19177c>CLASSPATH</span><span style=color:#666>=</span>.:../libs/lib1.jar
</span></span></code></pre></div><p>这意味着使用当前目录和 libs 目录中的 <code>lib1.jar</code> 作为 class path。对于 Windows：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>java -cp .;..\libs\lib1.jar com.MainClass.class
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 或者：</span>
</span></span><span style=display:flex><span><span style=color:green>SET </span>CLASSPATH=.;..\libs\lib1.jar
</span></span></code></pre></div><p>class path 默认为当前目录。但如果额外设置了 class path，则需要包含 <code>.</code>。</p><h3 id=包密封>包密封
<a class=anchor href=#%e5%8c%85%e5%af%86%e5%b0%81>#</a></h3><p>在 Java 中，所有以 java 开始的包都不会被加载，这是为了防止 Java 本身被篡改。在封装 jar 包时，也可以使用类似的办法。提供一个 jar 包的 <code>manifest</code> 文件：</p><pre tabindex=0><code class=language-manifest data-lang=manifest>Name: com/
Sealed: true
Name: net/
Sealed: true
</code></pre><p>或者，仅包含第二行的内容，这意味着整个 jar 中的包都被封闭。</p><h3 id=javadoc>JavaDoc
<a class=anchor href=#javadoc>#</a></h3><p>JavaDoc 工具会将符合格式的所有包，<code>public</code> 类和 <code>public</code> 及 <code>protected</code>成员的注释转化为 HTML 文档。注释使用 <code>/**...*/</code> 格式，放在描述对象的前面，其中可以使用 HTML 的标签。只推荐使用 <code>&lt;em></code> <code>&lt;code></code> <code>&lt;strong></code> <code>&lt;img></code> 等标签，避免使用标题，以免打乱文档。</p><p>当使用图片时，将图片保存在 <code>doc-files</code> 目录下，并使用 HTML 标签：<code>&lt;img src="doc-files/uml.jpg" alt="UML"></code>。最后：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>javadoc -d path package1 packege2 ...
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 添加作者和版本信息</span>
</span></span><span style=display:flex><span>javadoc -version -author
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 将标准库链接到Oracle文档</span>
</span></span><span style=display:flex><span>javadoc -link http://docs.oracle.com/javase/8/docs/api *.java
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 将源代码生成为HTML并链接</span>
</span></span><span style=display:flex><span>javadoc -linksource package
</span></span></code></pre></div><h4 id=类注释>类注释
<a class=anchor href=#%e7%b1%bb%e6%b3%a8%e9%87%8a>#</a></h4><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#408080;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * Something
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @author someone
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @version 1.1
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> */</span><span style=color:#bbb>
</span></span></span></code></pre></div><h4 id=方法注释>方法注释
<a class=anchor href=#%e6%96%b9%e6%b3%95%e6%b3%a8%e9%87%8a>#</a></h4><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#408080;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * Something
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @param param1 something
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @return something
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @throws something
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> */</span><span style=color:#bbb>
</span></span></span></code></pre></div><h4 id=变量注释>变量注释
<a class=anchor href=#%e5%8f%98%e9%87%8f%e6%b3%a8%e9%87%8a>#</a></h4><p>通常用在静态常量处</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#408080;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * something
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> */</span><span style=color:#bbb>
</span></span></span></code></pre></div><h4 id=通用标记>通用标记
<a class=anchor href=#%e9%80%9a%e7%94%a8%e6%a0%87%e8%ae%b0>#</a></h4><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#408080;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @since version 1.1
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @deprecated
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> */</span><span style=color:#bbb>
</span></span></span></code></pre></div><p>另外，还可以使用 <code>@Deprecated</code> 注解在编译中发出警告。</p><h4 id=链接>链接
<a class=anchor href=#%e9%93%be%e6%8e%a5>#</a></h4><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#408080;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * see 中可以省去包名或类名，这样会在当前包或类中查找
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @see com.test.Clazz#method(double)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @see &lt;a href=&#34;http://xxx&#34;&gt;Link&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @see something
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * @link link的用法类似
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> */</span><span style=color:#bbb>
</span></span></span></code></pre></div><h4 id=包和概述注释>包和概述注释
<a class=anchor href=#%e5%8c%85%e5%92%8c%e6%a6%82%e8%bf%b0%e6%b3%a8%e9%87%8a>#</a></h4><p>对于包，使用一个 <code>package-info.java</code> ：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#408080;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> * something
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic> */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>package</span><span style=color:#bbb> </span><span style=color:#00f;font-weight:700>com.test</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>对于整个项目的 Overview 注释，提供一个 <code>overview.html</code> 文件，放在所有源文件的父目录里。JavaDoc 会将其 <code>&lt;body></code> 标签的内容放在 Overview 里。</p><h3 id=静态导入>静态导入
<a class=anchor href=#%e9%9d%99%e6%80%81%e5%af%bc%e5%85%a5>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:green;font-weight:700>import static</span><span style=color:#bbb> </span><span style=color:#00f;font-weight:700>java.lang.Math.*</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>此时可以使用 Math 类的静态方法和静态变量。或：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:green;font-weight:700>import static</span><span style=color:#bbb> </span><span style=color:#00f;font-weight:700>java.lang.Math.sqrt</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>import static</span><span style=color:#bbb> </span><span style=color:#00f;font-weight:700>java.lang.Math.PI</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=嵌套类>嵌套类
<a class=anchor href=#%e5%b5%8c%e5%a5%97%e7%b1%bb>#</a></h2><h3 id=静态嵌套类>静态嵌套类
<a class=anchor href=#%e9%9d%99%e6%80%81%e5%b5%8c%e5%a5%97%e7%b1%bb>#</a></h3><h4 id=私有静态嵌套类>私有静态嵌套类
<a class=anchor href=#%e7%a7%81%e6%9c%89%e9%9d%99%e6%80%81%e5%b5%8c%e5%a5%97%e7%b1%bb>#</a></h4><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Invoice</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>private</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>static</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Item</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#408080;font-style:italic>//此处无需访问控制，因为Item类已经是private</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>String<span style=color:#bbb> </span>decription;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#b00040>double</span><span style=color:#bbb> </span><span style=color:#00f>price</span>()<span style=color:#bbb> </span>{<span style=color:#bbb> </span><span style=color:green;font-weight:700>return</span><span style=color:#bbb> </span>quantity<span style=color:#bbb> </span><span style=color:#666>*</span><span style=color:#bbb> </span>unitiPrice;<span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>private</span><span style=color:#bbb> </span>ArrayList<span style=color:#666>&lt;</span>Item<span style=color:#666>&gt;</span><span style=color:#bbb> </span>items<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>Arraylist<span style=color:#666>&lt;&gt;</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:#b00040>void</span><span style=color:#bbb> </span><span style=color:#00f>addItem</span>(String<span style=color:#bbb> </span>description)<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>...<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>这时，只有 Invoice 类中的方法能够访问 Item 类。</p><h4 id=公有静态嵌套类>公有静态嵌套类
<a class=anchor href=#%e5%85%ac%e6%9c%89%e9%9d%99%e6%80%81%e5%b5%8c%e5%a5%97%e7%b1%bb>#</a></h4><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#bbb> </span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Invoice</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>static</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Item</span><span style=color:#bbb> </span>{}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>此时任何人都可以直接访问 <code>Item</code> 类</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Other</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>Invoice.<span style=color:#7d9029>Item</span><span style=color:#bbb> </span>item<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>Item();<span style=color:#bbb>  </span><span style=color:#408080;font-style:italic>//其他位置可直接访问Item类</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>在静态嵌套类中，两个类除了访问权限和方法之外并没有实际的关系，嵌套类的使用和正常的类没有任何区别。</p><h3 id=内部类>内部类
<a class=anchor href=#%e5%86%85%e9%83%a8%e7%b1%bb>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Network</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Member</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#408080;font-style:italic>//Member对象将会知道自己从属的Network对象</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>private</span><span style=color:#bbb> </span>String<span style=color:#bbb> </span>name;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:#b00040>void</span><span style=color:#bbb> </span><span style=color:#00f>leave</span>()<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>members.<span style=color:#7d9029>remove</span>(<span style=color:green;font-weight:700>this</span>);<span style=color:#bbb>  </span><span style=color:#408080;font-style:italic>//从内部类中访问外部类的变量</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#408080;font-style:italic>//等同于 Network.this.members.remove(this)</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>private</span><span style=color:#bbb> </span>ArrayList<span style=color:#666>&lt;</span>Member<span style=color:#666>&gt;</span><span style=color:#bbb> </span>members;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span>Member<span style=color:#bbb> </span><span style=color:#00f>enroll</span>(String<span style=color:#bbb> </span>name)<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>members.<span style=color:#7d9029>add</span>(<span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>Member(name);<span style=color:#bbb>  </span><span style=color:#408080;font-style:italic>//等同于this.new Member()</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>此时可以在其他位置引用：</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Network<span style=color:#bbb> </span>myFace<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>Network();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>//在Network类外使用 Member 类</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Network.<span style=color:#7d9029>Member</span><span style=color:#bbb> </span>fred<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>myFace.<span style=color:#7d9029>enroll</span>(<span style=color:#ba2121>&#34;fred&#34;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Network.<span style=color:#7d9029>Member</span><span style=color:#bbb> </span>f<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>myFace.<span style=color:#7d9029>new</span><span style=color:#bbb> </span><span style=color:#00f>Member</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>fred.<span style=color:#7d9029>leave</span>();<span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=内部类的特殊情况>内部类的特殊情况
<a class=anchor href=#%e5%86%85%e9%83%a8%e7%b1%bb%e7%9a%84%e7%89%b9%e6%ae%8a%e6%83%85%e5%86%b5>#</a></h3><p>内部类的一个对象从属于外部类的一个对象，这会带来一些复杂的情况。</p><p>首先，内部类除了编译时常量 <code>static final Class variable = xxx;</code> 之外，并不能拥有静态成员，因为我们无法确定，这个成员是对于外部对象静态，还是对于 JVM 静态。</p><p>通常，我们可以直接在内部类中访问外部类的对象。当我们需要外部对象本身的时候，可以使用 <code>OuterClass.this</code>。</p><p>无论是嵌套类还是内部类，都将被编译成一个 <code>Outer$Inner.class</code> 文件。实现上，内部类的每个对象持有一个指向自己所从属的外部对象的引用。</p><h3 id=局部类>局部类
<a class=anchor href=#%e5%b1%80%e9%83%a8%e7%b1%bb>#</a></h3><p>局部类用于产生一个实现某个接口的对象，在 Java 8 之后逐渐被 lambda 表达式取代一部分。这样定义的类被控制在方法内。由于这个类不能被外部访问，所以不需要访问控制。另外，也可以声明匿名的局部类。</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>static</span><span style=color:#bbb> </span>IntSequence<span style=color:#bbb> </span><span style=color:#00f>randomInts</span>(<span style=color:#b00040>int</span><span style=color:#bbb> </span>low,<span style=color:#bbb> </span><span style=color:#b00040>int</span><span style=color:#bbb> </span>high)<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>RandomSequence</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>implements</span><span style=color:#bbb> </span>IntSequence<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#408080;font-style:italic>// 此处可以随意访问类的变量和randomInts方法的参数等</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>return</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>RandomSequence();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>public</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>static</span><span style=color:#bbb> </span>InySequence<span style=color:#bbb> </span><span style=color:#00f>randomDoubles</span>(<span style=color:#b00040>double</span><span style=color:#bbb> </span>low,<span style=color:#bbb> </span><span style=color:#b00040>double</span><span style=color:#bbb> </span>high)<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>return</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>IntSequence<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>...<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#第一章-基本的编程结构>第一章 基本的编程结构</a><ul><li><a href=#基本类型和变量>基本类型和变量</a><ul><li><a href=#数字>数字</a></li><li><a href=#字符>字符</a></li></ul></li><li><a href=#操作符>操作符</a></li><li><a href=#字符串>字符串</a><ul><li><a href=#unicode-编码问题>Unicode 编码问题</a></li></ul></li><li><a href=#控制台-io>控制台 IO</a></li><li><a href=#控制流和数组>控制流和数组</a></li><li><a href=#可变参数>可变参数</a></li></ul></li><li><a href=#第二章-面向对象编程>第二章 面向对象编程</a><ul><li><a href=#包>包</a><ul><li><a href=#class-path>Class Path</a></li><li><a href=#包密封>包密封</a></li><li><a href=#javadoc>JavaDoc</a><ul><li><a href=#类注释>类注释</a></li><li><a href=#方法注释>方法注释</a></li><li><a href=#变量注释>变量注释</a></li><li><a href=#通用标记>通用标记</a></li><li><a href=#链接>链接</a></li><li><a href=#包和概述注释>包和概述注释</a></li></ul></li><li><a href=#静态导入>静态导入</a></li></ul></li><li><a href=#嵌套类>嵌套类</a><ul><li><a href=#静态嵌套类>静态嵌套类</a><ul><li><a href=#私有静态嵌套类>私有静态嵌套类</a></li><li><a href=#公有静态嵌套类>公有静态嵌套类</a></li></ul></li><li><a href=#内部类>内部类</a></li><li><a href=#内部类的特殊情况>内部类的特殊情况</a></li><li><a href=#局部类>局部类</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>